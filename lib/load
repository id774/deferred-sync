#!/bin/sh

load_plugin() {
    while [ "$#" -gt 0 ]; do
        for PLUGIN in "$SCRIPT_HOME/lib/plugins/"*"$1"; do
            [ -r "$PLUGIN" ] && . "$PLUGIN"
        done
        shift
    done
}

load_plugins_by_config() {
    load_plugin $PLUGINS
}

load_plugins_all() {
    for PLUGIN in "$SCRIPT_HOME/lib/plugins/"*; do
        [ -r "$PLUGIN" ] && . "$PLUGIN"
    done
}

load_plugins() {
    if [ "$LOAD_PLUGINS_ALL" = "true" ]; then
        load_plugins_all
    else
        load_plugins_by_config
    fi
}

load_plugins
